当前项目概览保存在 overview.md 中，订单、商品和报表相关技术细节保存在 stats-apis.md 文件中。现在需要给管理后台添加查看当前热门商品的功能，只需要实现 API，不涉及前端界面的修改。你来问我设计上的问题，每次问一个问题，我来回答，当你觉得没有其他需要确认的问题时，编写一个 design.md 设计文档总结这个需求的相关设计。只需要产出文档就可以，先不要开始写代码实现它

---

我需要了解一些关于热门商品功能的设计细节，让我一个一个问题来确认需求。

您希望如何定义"热门商品"？是基于销售量、浏览量、收藏数，还是其他指标来确定商品的热门程度？

---

只基于销售量

---

明白了，热门商品将基于销售量来确定。

您希望查看的热门商品是针对什么时间范围的？比如最近7天、最近30天、或者是全部历史数据？

---

两个周期吧，一个是7天的，一个是30天的

---

好的，我们将提供两个时间周期的热门商品数据：最近7天和最近30天。

您希望返回多少个热门商品？是固定数量（如前10名）还是需要支持分页查询？

---

10个就好了，不需要分页

---

明白了，我们将返回销量前10的热门商品。

对于热门商品的展示信息，您希望包含哪些字段？例如商品ID、名称、图片、销售数量、价格等。

---

ID, 名称，销售数量

---

好的，我们将只返回商品的ID、名称和销售数量这三个字段。

这个API是否需要权限控制？比如只有管理员才能访问，或者是特定角色的管理员才能访问？

---

需要，只有管理员可以访问

---

明白了，这个API将需要管理员权限才能访问。

您希望这个API放在哪个控制器中？是创建一个新的控制器还是添加到现有的控制器中（如AdminStatController）？

---

新的控制器

---

好的，我们将创建一个新的控制器来处理热门商品的API。

对于销售量的计算，是否只考虑已完成的订单（如已支付、已收货的订单），还是所有状态的订单都计算在内？

---

所有状态

---

明白了，我们将计算所有状态订单中的商品销售量。

您希望API的响应格式是怎样的？是使用与现有统计API相同的格式（如StatVo），还是使用其他格式？

---

保持一致

---

好的，我们将使用与现有统计API相同的响应格式（StatVo）。

我已经收集了足够的信息来设计这个功能了。现在我将编写一个设计文档来总结这个需求的相关设计。

---

创建一个设计文档，总结热门商品统计API的需求和设计方案

---



我已经创建了设计文档 `design.md`，总结了热门商品统计API的需求和设计方案。以下是文档的主要内容：

## 热门商品统计API设计文档

### 1. 需求概述
为管理后台添加查看当前热门商品的功能，基于销售量统计最近7天和最近30天的热门商品。只需实现API，不涉及前端界面的修改。

### 2. 功能设计
- 提供两个API端点，分别查询最近7天和最近30天的热门商品
- 每个API返回销售量前10的商品
- 返回的商品信息包括：商品ID、商品名称和销售数量
- 只有管理员可以访问这些API

### 3. 技术设计
- 创建新的控制器类 `AdminHotGoodsController`
- 在 `StatService` 中添加新方法获取热门商品数据
- 在 `StatMapper` 接口和XML中添加对应的SQL查询
- SQL查询从 `litemall_order_goods` 表统计商品销售量，关联 `litemall_goods` 表获取商品名称
- 使用Shiro框架进行权限控制

### 4. 实现步骤
1. 在 `StatMapper.java` 中添加新方法
2. 在 `StatMapper.xml` 中添加对应的SQL查询
3. 在 `StatService.java` 中添加新方法
4. 创建 `AdminHotGoodsController.java` 控制器
5. 实现API端点
6. 添加权限控制

### 5. 注意事项
- 确保SQL查询性能良好
- 考虑缓存热门商品数据
- 确保正确处理时区问题
- 考虑数据量大时的性能问题

这个设计文档提供了清晰的实现指导，包括API设计、技术实现方案和注意事项，可以作为开发人员实现这个功能的参考。