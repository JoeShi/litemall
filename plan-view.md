# 商品统计页面热门商品功能实现计划

本文档提供了在LiteMall管理后台【统计报表】栏目中的【商品统计】页面添加【近期热门商品】功能的实现步骤和对应提示词。每个步骤都包含了明确的任务描述和提示词，可以直接交给AI来逐步完成需求。

## 步骤1：添加前端API调用函数

**任务**：在`litemall-admin/src/api/stat.js`文件中添加两个新函数，用于调用热门商品API。

**提示词**：
```
请在litemall-admin/src/api/stat.js文件中添加两个新函数：statHotGoods7Days和statHotGoods30Days，用于调用热门商品API。
statHotGoods7Days函数应该发送GET请求到'/stat/hot-goods/7days'端点，
statHotGoods30Days函数应该发送GET请求到'/stat/hot-goods/30days'端点。
这两个函数不需要接收任何参数，请参考现有的statGoods函数的实现方式。
```

## 步骤2：修改商品统计页面组件 - 基础结构

**任务**：修改`litemall-admin/src/views/stat/goods.vue`文件，添加热门商品表格的基础结构。

**提示词**：
```
请修改litemall-admin/src/views/stat/goods.vue文件，在现有的折线图组件下方添加两个表格容器，用于展示最近7天和最近30天的热门商品数据。
保留原有的折线图组件不变，在其下方添加两个div容器，分别用于7天和30天热门商品表格。
每个容器应该包含一个标题和一个刷新按钮。
请使用Element UI的组件库来实现界面。
```

## 步骤3：修改商品统计页面组件 - 添加表格组件

**任务**：在步骤2的基础上，为每个容器添加表格组件，用于展示热门商品数据。

**提示词**：
```
在步骤2的基础上，为7天和30天热门商品容器分别添加Element UI的表格组件(el-table)。
每个表格应该包含以下列：
1. 排名（根据索引计算）
2. 商品ID（对应goods_id字段）
3. 商品名称（对应goods_name字段）
4. 销售数量（对应sales_count字段）
5. 操作列（包含"查看详情"链接，链接到商品详情页）

表格应该有加载状态指示器，使用v-loading指令。
操作列中的"查看详情"按钮应该使用router-link组件链接到'/goods/detail?id='加上商品ID。
```

## 步骤4：修改商品统计页面组件 - 添加数据和方法

**任务**：在步骤3的基础上，添加数据属性和方法，用于获取和存储热门商品数据。

**提示词**：
```
在步骤3的基础上，修改goods.vue的script部分：
1. 导入新添加的statHotGoods7Days和statHotGoods30Days函数
2. 在data()中添加以下数据属性：
   - hotGoods7Days: []（存储7天热门商品数据）
   - hotGoods30Days: []（存储30天热门商品数据）
   - loading7Days: false（7天数据加载状态）
   - loading30Days: false（30天数据加载状态）
3. 添加两个方法：
   - fetchHotGoods7Days()：调用statHotGoods7Days API获取数据，并处理加载状态
   - fetchHotGoods30Days()：调用statHotGoods30Days API获取数据，并处理加载状态
4. 在created()生命周期钩子中，在加载原有折线图数据后，调用这两个方法获取热门商品数据
```

## 步骤5：修改商品统计页面组件 - 添加样式

**任务**：在步骤4的基础上，为热门商品表格添加样式。

**提示词**：
```
在步骤4的基础上，为goods.vue添加样式，美化热门商品表格的显示效果。
添加以下CSS类：
1. .hot-goods-container：设置外边距、内边距、背景色、圆角和阴影
2. .hot-goods-header：设置标题和刷新按钮的布局（使用flex布局）
3. .hot-goods-header h3：设置标题文字样式

样式应该放在<style scoped>标签内，确保只应用于当前组件。
```

## 步骤6：添加错误处理

**任务**：在步骤5的基础上，为API调用添加错误处理机制。

**提示词**：
```
在步骤5的基础上，为fetchHotGoods7Days和fetchHotGoods30Days方法添加错误处理机制。
使用.catch()方法捕获API调用可能出现的错误，并在错误发生时：
1. 将对应的loading状态设置为false
2. 使用Element UI的Message组件显示友好的错误提示
3. 可以选择在控制台输出详细错误信息，方便调试
```

## 步骤7：优化表格显示

**任务**：在步骤6的基础上，优化表格的显示效果。

**提示词**：
```
在步骤6的基础上，优化热门商品表格的显示效果：
1. 为销售数量列添加排序功能
2. 为排名前三的商品添加视觉强调，如不同的文字颜色或背景色
3. 确保表格在不同屏幕尺寸下能够正常显示，可以考虑添加响应式设计
4. 当没有数据时，显示"暂无数据"的提示信息
```

## 步骤8：添加单元测试

**任务**：为新添加的功能编写单元测试。

**提示词**：
```
为新添加的热门商品功能编写单元测试，测试内容包括：
1. API调用函数是否正确发送请求
2. 组件是否正确渲染热门商品数据
3. 刷新按钮是否能正常工作
4. 错误处理机制是否生效

使用Vue Test Utils和Jest进行测试，参考项目中现有的测试用例。
```

## 步骤9：文档更新

**任务**：更新项目文档，添加新功能的说明。

**提示词**：
```
更新项目文档，添加热门商品功能的说明：
1. 在README.md或相关文档中添加新功能的描述
2. 说明如何使用这个功能
3. 解释数据的来源和含义
4. 如果有特殊的使用注意事项，也应该一并说明
```

## 步骤10：代码审查和优化

**任务**：审查所有代码，确保质量和一致性，并进行必要的优化。

**提示词**：
```
请审查之前实现的所有代码，确保：
1. 代码风格与项目现有代码保持一致
2. 没有冗余或重复的代码
3. 变量和函数命名清晰明了
4. 注释充分且有意义
5. 性能已经过优化，如避免不必要的计算或渲染
6. 所有可能的错误情况都已处理

如果发现任何问题，请进行修复和优化。
```

## 完整实现参考

以上步骤完成后，您将在商品统计页面中添加了热门商品功能，用户可以查看最近7天和30天的热门商品数据，并通过刷新按钮更新数据。

每个步骤都可以单独交给AI来完成，也可以根据实际情况合并某些步骤。如果在实现过程中遇到问题，可以随时调整计划或向AI提出更具体的问题。